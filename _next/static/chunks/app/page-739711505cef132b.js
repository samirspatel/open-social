(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4679:function(e,s,t){Promise.resolve().then(t.bind(t,8782))},8782:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return D}});var a=t(7437),r=t(998),i=t(2265),l=t(4817),n=t(1005),c=t(7583),o=t(5525),d=t(2030),m=t(4042),x=t(2022);function h(){var e;let[s,t]=(0,i.useState)(""),{data:h}=(0,r.useSession)(),g=async()=>{try{await (0,r.signOut)({callbackUrl:"/"})}catch(e){console.error("Sign out error:",e)}};return(0,a.jsx)("header",{className:"fixed top-0 left-0 right-0 bg-white border-b border-instagram-border z-50",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 h-16 flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-instagram-primary via-instagram-secondary to-instagram-tertiary bg-clip-text text-transparent",children:"GitSocial"})}),(0,a.jsx)("div",{className:"hidden md:flex items-center flex-1 max-w-md mx-8",children:(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-instagram-text-light w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search users, posts...",value:s,onChange:e=>t(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-instagram-background border border-instagram-border rounded-lg text-sm focus:outline-none focus:border-gray-400"})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsx)("button",{className:"hover:scale-110 transition-transform",children:(0,a.jsx)(n.Z,{className:"w-6 h-6 text-instagram-text"})}),(0,a.jsx)("button",{className:"hover:scale-110 transition-transform",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-instagram-text"})}),(0,a.jsx)("button",{className:"hover:scale-110 transition-transform",children:(0,a.jsx)(o.Z,{className:"w-6 h-6 text-instagram-text"})}),(0,a.jsx)("button",{className:"hover:scale-110 transition-transform",children:(0,a.jsx)(d.Z,{className:"w-6 h-6 text-instagram-text"})}),(0,a.jsxs)("button",{className:"hover:scale-110 transition-transform relative",children:[(0,a.jsx)(m.Z,{className:"w-6 h-6 text-instagram-text"}),(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-instagram-primary text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:"3"})]}),(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("button",{className:"hover:scale-110 transition-transform",children:(null==h?void 0:null===(e=h.user)||void 0===e?void 0:e.image)?(0,a.jsx)("img",{src:h.user.image,alt:"Profile",className:"w-8 h-8 rounded-full border-2 border-instagram-primary object-cover"}):(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-instagram-primary to-instagram-secondary rounded-full flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-5 h-5 text-white"})})}),(0,a.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-instagram-border rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:(0,a.jsxs)("div",{className:"p-2",children:[(null==h?void 0:h.user)&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"px-3 py-2 border-b border-gray-100 mb-2",children:[(0,a.jsx)("p",{className:"font-semibold text-sm",children:h.user.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["@",h.user.name]})]})}),(0,a.jsx)("button",{className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded-md text-sm",children:"Profile"}),(0,a.jsx)("button",{className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded-md text-sm",children:"Settings"}),(0,a.jsx)("hr",{className:"my-1 border-instagram-border"}),(0,a.jsx)("button",{onClick:g,className:"w-full text-left px-3 py-2 hover:bg-gray-50 rounded-md text-sm text-red-600",children:"Sign Out"})]})})]})]})]})})}var g=t(1240),u=t(3225),p=t(3152),j=t(9338);function b(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"card-instagram p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("img",{src:"https://github.com/identicons/currentuser.png",alt:"Your avatar",className:"w-12 h-12 rounded-full object-cover"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:"currentuser"}),(0,a.jsx)("p",{className:"text-instagram-text-light text-sm",children:"@currentuser.com"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:"42"}),(0,a.jsx)("div",{className:"text-instagram-text-light text-xs",children:"Posts"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:"123"}),(0,a.jsx)("div",{className:"text-instagram-text-light text-xs",children:"Following"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:"89"}),(0,a.jsx)("div",{className:"text-instagram-text-light text-xs",children:"Followers"})]})]})]}),(0,a.jsxs)("div",{className:"card-instagram",children:[(0,a.jsx)("div",{className:"p-4 pb-0",children:(0,a.jsxs)("h3",{className:"font-semibold flex items-center space-x-2 mb-4",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Suggested for you"})]})}),(0,a.jsx)("div",{className:"divide-y divide-instagram-border",children:[{username:"sarah_dev",name:"Sarah Chen",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=80&h=80&fit=crop&crop=face",handle:"@sarah.dev",mutualFollows:12,isFollowing:!1},{username:"mike_codes",name:"Mike Rodriguez",avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=80&h=80&fit=crop&crop=face",handle:"@mike.codes",mutualFollows:8,isFollowing:!1},{username:"tech_jane",name:"Jane Smith",avatar:"https://images.unsplash.com/photo-1544725176-7c40e5a71c5e?w=80&h=80&fit=crop&crop=face",handle:"@jane.tech",mutualFollows:15,isFollowing:!0}].map(e=>(0,a.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:e.avatar,alt:e.name,className:"w-10 h-10 rounded-full object-cover"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold text-sm",children:e.name}),(0,a.jsx)("div",{className:"text-instagram-text-light text-xs",children:e.handle}),(0,a.jsxs)("div",{className:"text-instagram-text-light text-xs",children:[e.mutualFollows," mutual follows"]})]})]}),(0,a.jsx)("button",{className:"px-4 py-1 rounded-md text-sm font-semibold transition-colors ".concat(e.isFollowing?"btn-instagram-outline":"btn-instagram"),children:e.isFollowing?"Following":"Follow"})]},e.username))}),(0,a.jsx)("div",{className:"p-4 pt-0",children:(0,a.jsx)("button",{className:"text-instagram-primary text-sm font-semibold",children:"See all suggestions"})})]}),(0,a.jsxs)("div",{className:"card-instagram",children:[(0,a.jsx)("div",{className:"p-4 pb-0",children:(0,a.jsxs)("h3",{className:"font-semibold flex items-center space-x-2 mb-4",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Trending"})]})}),(0,a.jsx)("div",{className:"divide-y divide-instagram-border",children:[{tag:"#opensource",posts:"12.4K"},{tag:"#gitsocial",posts:"8.2K"},{tag:"#webdev",posts:"45.1K"},{tag:"#reactjs",posts:"32.7K"},{tag:"#typescript",posts:"28.3K"}].map(e=>(0,a.jsxs)("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,a.jsx)("div",{className:"font-semibold text-sm text-instagram-primary",children:e.tag}),(0,a.jsxs)("div",{className:"text-instagram-text-light text-xs",children:[e.posts," posts"]})]},e.tag))})]}),(0,a.jsxs)("div",{className:"card-instagram",children:[(0,a.jsx)("div",{className:"p-4 pb-0",children:(0,a.jsxs)("h3",{className:"font-semibold flex items-center space-x-2 mb-4",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Popular Repositories"})]})}),(0,a.jsx)("div",{className:"divide-y divide-instagram-border",children:[{name:"vercel/next.js",stars:"118k",language:"TypeScript"},{name:"facebook/react",stars:"220k",language:"JavaScript"},{name:"microsoft/vscode",stars:"156k",language:"TypeScript"}].map(e=>(0,a.jsxs)("div",{className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("div",{className:"font-semibold text-sm",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 text-instagram-text-light text-xs",children:[(0,a.jsx)(j.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:e.stars})]})]}),(0,a.jsx)("div",{className:"text-instagram-text-light text-xs",children:e.language})]},e.name))}),(0,a.jsx)("div",{className:"p-4 pt-0",children:(0,a.jsx)("button",{className:"text-instagram-primary text-sm font-semibold",children:"Explore repositories"})})]})]})}var v=t(3644),f=t(3550),N=t(560),y=t(5781);function w(e){let{post:s,onLike:t}=e,[r,l]=(0,i.useState)(!1),[n,o]=(0,i.useState)(""),d=async()=>{navigator.share?await navigator.share({title:"".concat(s.author.name," on GitSocial"),text:s.content,url:window.location.href}):navigator.clipboard.writeText(window.location.href)};return(0,a.jsxs)("div",{className:"card-instagram",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 pb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:s.author.avatar,alt:s.author.name,className:"w-10 h-10 rounded-full object-cover border-2 border-transparent hover:border-instagram-primary transition-colors"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("span",{className:"font-semibold text-sm",children:s.author.username}),(0,a.jsx)(v.Z,{className:"w-3 h-3 text-instagram-text-light"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-instagram-text-light text-xs",children:[(0,a.jsx)("span",{children:s.author.handle}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:(0,y.Q)(s.timestamp,{addSuffix:!0})})]})]})]}),(0,a.jsx)("button",{className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:(0,a.jsx)(f.Z,{className:"w-5 h-5 text-instagram-text-light"})})]}),s.images.length>0&&(0,a.jsxs)("div",{className:"aspect-square relative",children:[(0,a.jsx)("img",{src:s.images[0],alt:"Post content",className:"w-full h-full object-cover"}),s.images.length>1&&(0,a.jsxs)("div",{className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-xs",children:["1/",s.images.length]})]}),(0,a.jsxs)("div",{className:"px-4 pt-3 pb-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:t,className:"hover:scale-110 transition-transform group",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 ".concat(s.isLiked?"text-red-500 fill-red-500":"text-instagram-text hover:text-instagram-text-light")})}),(0,a.jsx)("button",{onClick:()=>l(!r),className:"hover:scale-110 transition-transform",children:(0,a.jsx)(c.Z,{className:"w-6 h-6 text-instagram-text hover:text-instagram-text-light"})}),(0,a.jsx)("button",{onClick:d,className:"hover:scale-110 transition-transform",children:(0,a.jsx)(N.Z,{className:"w-6 h-6 text-instagram-text hover:text-instagram-text-light"})})]}),(0,a.jsx)("div",{className:"text-xs text-instagram-text-light bg-gray-100 px-2 py-1 rounded-full",children:s.repository})]}),s.likes>0&&(0,a.jsxs)("p",{className:"font-semibold text-sm mb-2",children:[s.likes.toLocaleString()," ",1===s.likes?"like":"likes"]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold mr-2",children:s.author.username}),(0,a.jsx)("span",{children:s.content})]}),s.comments>0&&(0,a.jsxs)("button",{onClick:()=>l(!r),className:"text-instagram-text-light text-sm mt-2 hover:text-instagram-text",children:["View all ",s.comments," comments"]}),r&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-instagram-border",children:[(0,a.jsx)("div",{className:"space-y-3 mb-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("img",{src:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=32&h=32&fit=crop&crop=face",alt:"Commenter",className:"w-8 h-8 rounded-full object-cover"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-semibold mr-2",children:"johndoe"}),(0,a.jsx)("span",{children:"This is amazing! \uD83D\uDD25"})]}),(0,a.jsx)("div",{className:"text-xs text-instagram-text-light mt-1",children:"2h"})]})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:"https://github.com/identicons/currentuser.png",alt:"You",className:"w-8 h-8 rounded-full object-cover"}),(0,a.jsx)("input",{type:"text",placeholder:"Add a comment...",value:n,onChange:e=>o(e.target.value),className:"flex-1 text-sm focus:outline-none"}),n&&(0,a.jsx)("button",{className:"text-instagram-primary text-sm font-semibold",children:"Post"})]})]})]})]})}var k=t(4697),S=t(233),F=t(9321),Z=t(2092),C=t(3274);function P(e){var s,t,l;let{onPost:n}=e,{data:c}=(0,r.useSession)(),[o,d]=(0,i.useState)(""),[m,x]=(0,i.useState)([]),[h,g]=(0,i.useState)(!1),[u,p]=(0,i.useState)(!1),j=(0,i.useRef)(null),b=e=>{x(s=>s.filter((s,t)=>t!==e))},v=async e=>{if(e.preventDefault(),o.trim()&&!u){p(!0);try{await n(o,m),d(""),x([]),g(!1)}catch(e){console.error("Error posting:",e)}finally{p(!1)}}},f=o.length,N=f>280;return(0,a.jsx)("div",{className:"bg-white border border-instagram-border rounded-lg",children:(0,a.jsxs)("form",{onSubmit:v,children:[(0,a.jsxs)("div",{className:"p-4 border-b border-instagram-border flex items-center space-x-3",children:[(null==c?void 0:null===(s=c.user)||void 0===s?void 0:s.image)?(0,a.jsx)("img",{src:c.user.image,alt:"Your avatar",className:"w-10 h-10 rounded-full border-2 border-instagram-primary object-cover"}):(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-instagram-primary to-instagram-secondary rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-instagram-text",children:(null==c?void 0:null===(t=c.user)||void 0===t?void 0:t.name)||"User"}),(0,a.jsxs)("p",{className:"text-xs text-instagram-text-light",children:["Publishing to: ",null==c?void 0:null===(l=c.user)||void 0===l?void 0:l.name,"/social-data"]})]})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("textarea",{value:o,onChange:e=>d(e.target.value),onFocus:()=>{g(!0)},placeholder:"What's happening in your distributed world?",className:"w-full resize-none border-0 focus:ring-0 text-lg placeholder-instagram-text-light",rows:h?4:2,maxLength:380}),h&&(0,a.jsx)("div",{className:"text-right mt-2",children:(0,a.jsxs)("span",{className:"text-sm ".concat(N?"text-red-500":f>224?"text-yellow-500":"text-instagram-text-light"),children:[f,"/",280]})}),m.length>0&&(0,a.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-2",children:m.map((e,s)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e,alt:"Upload ".concat(s+1),className:"w-full h-32 object-cover rounded-lg"}),(0,a.jsx)("button",{type:"button",onClick:()=>b(s),className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white rounded-full p-1 hover:bg-opacity-70",children:(0,a.jsx)(k.Z,{className:"w-4 h-4"})})]},s))}),h&&(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},className:"flex items-center space-x-2 text-instagram-primary hover:text-instagram-secondary",disabled:u,children:[(0,a.jsx)(S.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm",children:"Photo"})]}),(0,a.jsxs)("button",{type:"button",className:"flex items-center space-x-2 text-instagram-text-light hover:text-instagram-text",disabled:u,children:[(0,a.jsx)(F.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm",children:"Location"})]}),(0,a.jsxs)("button",{type:"button",className:"flex items-center space-x-2 text-instagram-text-light hover:text-instagram-text",disabled:u,children:[(0,a.jsx)(Z.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-sm",children:"Emoji"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{d(""),x([]),g(!1)},className:"px-4 py-2 text-instagram-text-light hover:text-instagram-text transition-colors",disabled:u,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:!o.trim()||u||N,className:"btn-instagram flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Z,{className:"w-4 h-4 animate-spin"}),(0,a.jsx)("span",{children:"Posting..."})]}):(0,a.jsx)("span",{children:"Post"})})]})]}),!h&&o.trim()&&(0,a.jsx)("div",{className:"mt-4 text-right",children:(0,a.jsx)("button",{type:"submit",disabled:!o.trim()||u||N,className:"btn-instagram",children:"Post"})})]}),(0,a.jsx)("input",{ref:j,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:e=>{let s=e.target.files;s&&Array.from(s).forEach(e=>{if(e.type.startsWith("image/")){let s=new FileReader;s.onload=e=>{var s;let t=null===(s=e.target)||void 0===s?void 0:s.result;x(e=>[...e,t])},s.readAsDataURL(e)}})}})]})})}function E(){var e;let{data:s}=(0,r.useSession)(),[t,l]=(0,i.useState)([]),[n,c]=(0,i.useState)(!0),[o,d]=(0,i.useState)(null),m=async()=>{try{c(!0);let e=await fetch("/api/posts",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch posts");let s=await e.json();s.success?l(s.posts||[]):d(s.error||"Failed to load posts")}catch(e){console.error("Error fetching posts:",e),d("Failed to load posts")}finally{c(!1)}},x=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{let t=await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e,images:s,mentions:h(e),hashtags:g(e)})});if(!t.ok)throw Error("Failed to create post");let a=await t.json();if(a.success)l(e=>[a.post,...e]);else throw Error(a.error||"Failed to create post")}catch(e){console.error("Error creating post:",e),alert("Failed to create post. Please try again.")}},h=e=>{let s;let t=/@(\w+)/g,a=[];for(;null!==(s=t.exec(e));)a.push(s[1]);return a},g=e=>{let s;let t=/#(\w+)/g,a=[];for(;null!==(s=t.exec(e));)a.push(s[1]);return a};return((0,i.useEffect)(()=>{s&&m()},[s]),s)?(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,a.jsx)(P,{onPost:x}),n&&(0,a.jsxs)("div",{className:"bg-white border border-instagram-border rounded-lg p-8 text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-instagram-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-instagram-text-light",children:"Loading your feed..."})]}),o&&(0,a.jsxs)("div",{className:"bg-white border border-instagram-border rounded-lg p-8 text-center",children:[(0,a.jsx)("p",{className:"text-red-600 mb-4",children:o}),(0,a.jsx)("button",{onClick:m,className:"btn-instagram",children:"Try Again"})]}),!n&&!o&&0===t.length&&(0,a.jsxs)("div",{className:"bg-white border border-instagram-border rounded-lg p-8 text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-instagram-text mb-2",children:"Welcome to GitSocial!"}),(0,a.jsx)("p",{className:"text-instagram-text-light mb-4",children:"Start by creating your first post or following other users to see their content in your feed."}),(0,a.jsxs)("div",{className:"text-sm text-instagram-text-light",children:[(0,a.jsx)("p",{children:"Your posts will be stored in your GitHub repository:"}),(0,a.jsxs)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs mt-2 inline-block",children:[null===(e=s.user)||void 0===e?void 0:e.name,"/social-data"]})]})]}),!n&&!o&&t.map(e=>(0,a.jsx)(w,{post:{id:e.id,author:{username:e.author,name:e.author,avatar:"https://github.com/".concat(e.author,".png"),handle:"@".concat(e.author)},content:e.content,images:e.media||[],timestamp:new Date(e.createdAt),likes:0,comments:0,isLiked:!1,repository:"".concat(e.author,"/social-data")},onLike:()=>{console.log("Like post:",e.id)}},e.id)),!n&&!o&&t.length>0&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("button",{onClick:m,className:"text-instagram-primary hover:text-instagram-secondary font-semibold",children:"Refresh Feed"})})]}):null}var G=t(4453),L=t(7055);function T(e){let{isOpen:s}=e,[t,l]=(0,i.useState)(!1),n=async()=>{l(!0);try{await (0,r.signIn)("github",{callbackUrl:"/",redirect:!0})}catch(e){console.error("Sign in error:",e),l(!1)}};return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-md",children:[(0,a.jsxs)("div",{className:"text-center p-8 border-b border-instagram-border",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-instagram-primary via-instagram-secondary to-instagram-tertiary rounded-full flex items-center justify-center",children:(0,a.jsx)(v.Z,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-instagram-primary via-instagram-secondary to-instagram-tertiary bg-clip-text text-transparent mb-2",children:"GitSocial"}),(0,a.jsx)("p",{className:"text-instagram-text-light text-sm",children:"Distributed social media powered by GitHub"})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5 text-instagram-primary mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-sm",children:"Own Your Data"}),(0,a.jsx)("p",{className:"text-instagram-text-light text-xs",children:"Your posts, likes, and follows live in your GitHub repository"})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(G.Z,{className:"w-5 h-5 text-instagram-secondary mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-sm",children:"Full Portability"}),(0,a.jsx)("p",{className:"text-instagram-text-light text-xs",children:"Switch apps anytime without losing your connections"})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(L.Z,{className:"w-5 h-5 text-instagram-tertiary mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-sm",children:"GitHub Integration"}),(0,a.jsx)("p",{className:"text-instagram-text-light text-xs",children:"Seamlessly connects with your existing GitHub account"})]})]})]}),(0,a.jsx)("button",{onClick:n,disabled:t,className:"w-full bg-black hover:bg-gray-800 text-white font-semibold py-3 px-4 rounded-lg flex items-center justify-center space-x-3 transition-colors duration-200 disabled:opacity-50",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Connecting to GitHub..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Continue with GitHub"})]})}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg text-left",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900 mb-2 text-xs",children:"What happens when you sign in:"}),(0,a.jsxs)("ul",{className:"text-xs text-blue-800 space-y-1",children:[(0,a.jsx)("li",{children:"• We'll create a 'social-data' repository in your account"}),(0,a.jsx)("li",{children:"• Your posts will be stored as JSON files with full history"}),(0,a.jsx)("li",{children:"• You maintain complete ownership of your social data"}),(0,a.jsx)("li",{children:"• Export or migrate your data anytime - no lock-in"})]})]}),(0,a.jsx)("p",{className:"text-center text-instagram-text-light text-xs mt-4",children:"By continuing, you agree to create a public repository for your social data"})]})]})}):null}function D(){let{data:e,status:s}=(0,r.useSession)();return"loading"===s?(0,a.jsx)("div",{className:"min-h-screen bg-instagram-background flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-instagram-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-instagram-text-light",children:"Loading GitSocial..."})]})}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-instagram-background",children:[(0,a.jsx)(h,{}),(0,a.jsxs)("div",{className:"flex max-w-6xl mx-auto pt-16",children:[(0,a.jsx)("div",{className:"flex-1 max-w-2xl mx-auto px-4",children:(0,a.jsx)(E,{})}),(0,a.jsx)("div",{className:"hidden lg:block w-80 p-4",children:(0,a.jsx)(b,{})})]})]}):(0,a.jsx)(T,{isOpen:!0})}}},function(e){e.O(0,[998,455,971,23,744],function(){return e(e.s=4679)}),_N_E=e.O()}]);